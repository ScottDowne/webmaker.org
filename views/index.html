{% extends "layout.html" %}
{% block title %}Home{% endblock %}
{% block body %}
  <div class="main-gallery"></div>
  <div class="make" style="display: none;">
    <div class="make-type"></div>
    <div class="title"></div>
  </div>
{% endblock %}
{% block scripts %}
  <script>
// needed variables
var LIMIT = 30;

var mainGallery = document.querySelector( ".main-gallery" ),
    $mainGallery = $( mainGallery ),
    $makeTemplate = $( ".make" );

// needed methods
function searchCallback( data ){
  var $makeContainer = $makeTemplate.clone( true ).css( "display", "" ),
      makeContainer = $makeContainer[ 0 ],
      makeType = data.tags.makeType;

  // create front Element & populate
  $frontEl = $('<div>').addClass('front');
  $a = $(  '<a>' ).attr( 'href', data.url );
  $img = $( '<img>' ).attr( 'src', data.thumbnail );
  $a.append( $img );
  $frontEl.append( $a );

  // create back element & populate
  $backEl = $('<div>').addClass('back)');

  // add front & back elements to flip container
  $makeContainer.append( $frontEl );
  $makeContainer.append( $backEl );

  // TODO: add flip container to make container

  // add to gallery & packery
  $mainGallery.append( $makeContainer );
  packery.appended( makeContainer );

  // re-layout
  packery.layout();
}

// set up Packerly
var packery = new Packery( mainGallery, {
  gutter: 10
});

// perform search
wm.doSearch( "featured", LIMIT, searchCallback);
  </script>
{% endblock %}
